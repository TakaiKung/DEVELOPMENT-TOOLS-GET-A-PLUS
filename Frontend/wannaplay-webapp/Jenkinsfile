pipeline {
    agent any
stages {
   stage('Pull code') {
       steps {
           checkout scm
       }
   }
   stage('Download dependency') {
       steps {
           dir('Frontend/wannaplay-webapp') {
               sh 'npm install'
           }
       }
   }
   stage('Run unit test') {
        steps {
              dir('Frontend/wannaplay-webapp') {
                   sh 'npm run test'
              }
        }
   }
   stage('Run Integration test') {
       steps {
           echo 'run component test'
       }
   }
   stage('Build') {
       steps {
           
          dir('Frontend/wannaplay-webapp') {
               sh 'npm run-script build'
           }
       }
   }
    
   stage('Deployment') {
        steps{
            withCredentials([string(credentialsId: 'T09_FRONTEND_PASS', variable: 'T09_PASS')]) {
                script {
                def remote = [:]
                remote.name = 'test'
                remote.host = '159.65.12.177'
                remote.user = 'root'
                remote.password = $T09_PASS
                remote.allowAnyHosts = true
                sshCommand remote: remote, command: "ls -lrt"
            }
            }
            
        }       
      }
          
   }
    
 }

